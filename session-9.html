<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 11th Mile | The Fartlek Pyramid</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <a href="index.html" class="home-btn">‚Üê Back to Library</a>
    <a href="index.html" class="logo">THE 11th MILE</a>
</header>

<div class="container">

    <div class="sticky-bar">
        <h3 style="margin:0; font-size:1.1rem;">Session Settings</h3>
        
        <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 0.85rem; opacity: 0.8; white-space: nowrap;">Enter 5K Time:</span>
                <input type="text" id="sessionPace" class="calc-input" placeholder="MM:SS" oninput="formatInput(this)">
            </div>
            <button id="unitBtn" class="unit-btn" onclick="toggleUnits()" style="margin: 0;">Display: Miles</button>
        </div>
    </div>

    <div class="dashboard">
        
        <div>
            <div class="card">
                <h2>The Fartlek Pyramid <span id="dist-tag" style="font-size: 0.8em; font-weight: normal; color: #888; margin-left: 10px;">(~6 Miles)</span></h2>
                <p><strong>Goal:</strong> Gear Changing & Aerobic Power.</p>
                
                <div class="step">
                    <div class="step-num" style="background: var(--warmup);">W</div>
                    <div class="step-content">
                        <strong id="lbl-wu">1 Mile Warm Up</strong>
                        <small>Easy conversation pace.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">1</div>
                    <div class="step-content">
                        <strong>3 Minutes</strong>
                        <small>Target: 5K Pace (Hard). <br><strong>Recovery:</strong> 2 Minutes Easy Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">2</div>
                    <div class="step-content">
                        <strong>4 Minutes</strong>
                        <small>Target: 5K Pace (Hard). <br><strong>Recovery:</strong> 2 Minutes Easy Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">3</div>
                    <div class="step-content">
                        <strong>5 Minutes (The Summit)</strong>
                        <small>Target: 10K Pace (Controlled Strength). <br><strong>Recovery:</strong> 2 Minutes Easy Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">4</div>
                    <div class="step-content">
                        <strong>3 Minutes</strong>
                        <small>Target: 5K Pace (Hard). <br><strong>Recovery:</strong> 2 Minutes Easy Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">5</div>
                    <div class="step-content">
                        <strong>2 Minutes</strong>
                        <small>Target: 3K Pace (Fast). <br><strong>Recovery:</strong> 2 Minutes Easy Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">6</div>
                    <div class="step-content">
                        <strong>1 Minute</strong>
                        <small>Target: 3K/Mile Pace (Empty the tank). <br><strong>Recovery:</strong> 2 Minutes Walk/Jog.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num" style="background: var(--warmup);">C</div>
                    <div class="step-content">
                        <strong id="lbl-cd">1 Mile Cool Down</strong>
                        <small>Very slow jog to flush lactate.</small>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="pros-cons">
                    <div class="pc-box">
                        <h3>Pros</h3>
                        <ul>
                            <li>Can be done on any terrain (road/trail).</li>
                            <li>Teaches you to run by "feel."</li>
                            <li>Breaks up the monotony of distance running.</li>
                        </ul>
                    </div>
                    <div class="pc-box">
                        <h3>Cons</h3>
                        <ul>
                            <li>Easy to run too slow if not disciplined.</li>
                            <li>The 5-minute rep is mentally tough in the middle.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card tip-box">
                <strong>Coach's Tip:</strong>
                <p style="margin: 5px 0 0 0;">Don't sprint the first 3 minute rep. You need to survive the 5 minute "Summit" in the middle. Save your fastest gear for the final "2, 1" descent when your legs are tired.</p>
            </div>
        </div>

        <div>
            <div class="card" style="background: #2D3436; color: white;">
                <h2 style="color:var(--accent); border-color:var(--accent);">Your Targets</h2>
                <p style="font-size: 0.9rem; opacity: 0.8;">Based on <span id="displayTime">--:--</span> 5K</p>
                
                <div class="pace-row">
                    <div><span id="tgt-wu">Warm Up Pace</span></div>
                    <span id="p-wu" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row">
                    <div><span>3 & 4 Min Reps</span><span class="sub-label">5k Pace</span></div>
                    <span id="p-5k" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row">
                    <div><span>5 Min Rep</span><span class="sub-label">10k Pace</span></div>
                    <span id="p-10k" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row">
                    <div><span>2 & 1 Min Reps</span><span class="sub-label">3k Pace</span></div>
                    <span id="p-3k" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row">
                    <div><span id="tgt-cd">Cool Down Pace</span></div>
                    <span id="p-cd" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row" style="border-bottom: none;">
                    <div><span>Recovery (Jog)</span><span class="sub-label">Very Easy</span></div>
                    <span id="p-rec" class="pace-val">--:--</span>
                </div>
            </div>

            <div class="card">
                <h3>Session Logic</h3>
                <p style="font-size: 0.9rem;">This pyramid forces you to change gears. You start fast, settle into a rhythm for the 5 minute rep, and then have to find speed again when your legs are heavy.</p>
            </div>
        </div>

    </div>

</div>

<script src="app.js"></script>

<script>
    // PAGE SPECIFIC LOGIC
    window.onload = function() {
        initPage(); // From app.js
        updatePageCalc();
    }

    function updatePageCalc() {
        const input = document.getElementById('sessionPace').value;
        const totalSeconds = parseTime(input); // From app.js
        document.getElementById('displayTime').innerText = input || "--:--";

        if (!totalSeconds) return;

        let basePace, p10k, p5k, p3k, wuPace, cdPace, pRec, suffix;

        if (isMetric) {
            // KM MATH
            basePace = totalSeconds / 5;
            suffix = " /km";
            p10k = basePace + 9;
            p5k = basePace;
            p3k = basePace - 9;
            pRec = basePace + 93;
            wuPace = basePace + 101;  
            cdPace = basePace + 101; 

            // Labels
            document.getElementById('dist-tag').innerText = "(~10 KM)";
            document.getElementById('lbl-wu').innerText = "1.6km Warm Up";
            document.getElementById('lbl-cd').innerText = "1.6km Cool Down";
            document.getElementById('tgt-wu').innerText = "Warm Up Pace";
            document.getElementById('tgt-cd').innerText = "Cool Down Pace";

        } else {
            // MILE MATH
            basePace = totalSeconds / 3.1068;
            suffix = " /mi";
            p10k = basePace + 15;
            p5k = basePace;
            p3k = basePace - 15;
            pRec = basePace + 150;
            wuPace = basePace + 161; 
            cdPace = basePace + 161; 

            // Labels
            document.getElementById('dist-tag').innerText = "(~6 Miles)";
            document.getElementById('lbl-wu').innerText = "1 Mile Warm Up";
            document.getElementById('lbl-cd').innerText = "1 Mile Cool Down";
            document.getElementById('tgt-wu').innerText = "Warm Up Pace";
            document.getElementById('tgt-cd').innerText = "Cool Down Pace";
        }

        document.getElementById('p-wu').innerText = formatTime(wuPace) + suffix;
        document.getElementById('p-5k').innerText = formatTime(p5k) + suffix;
        document.getElementById('p-10k').innerText = formatTime(p10k) + suffix;
        document.getElementById('p-3k').innerText = formatTime(p3k) + suffix;
        document.getElementById('p-cd').innerText = formatTime(cdPace) + suffix;
        document.getElementById('p-rec').innerText = formatTime(pRec) + suffix;
    }
</script>

</body>
</html>