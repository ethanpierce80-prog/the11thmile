<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The 11th Mile | Progressive Tempo Mix</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <a href="index.html" class="home-btn">‚Üê Back to Library</a>
    <a href="index.html" class="logo">THE 11th MILE</a>
</header>

<div class="container">

    <div class="sticky-bar">
        <h3 style="margin:0; font-size:1.1rem;">Session Settings</h3>
        
        <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 0.85rem; opacity: 0.8; white-space: nowrap;">Enter 5K Time:</span>
                <input type="text" id="sessionPace" class="calc-input" placeholder="MM:SS" oninput="formatInput(this)">
            </div>
            <button id="unitBtn" class="unit-btn" onclick="toggleUnits()" style="margin: 0;">Display: Miles</button>
        </div>
    </div>

    <div class="dashboard">
        
        <div>
            <div class="card">
                <h2>Progressive Tempo Mix <span id="dist-tag" style="font-size: 0.8em; font-weight: normal; color: #888; margin-left: 10px;">(~7.5 Miles)</span></h2>
                <p><strong>Goal:</strong> Fatigue Resistance & Pacing Control.</p>
                
                <div class="step">
                    <div class="step-num" style="background: var(--warmup);">W</div>
                    <div class="step-content">
                        <strong id="lbl-wu">1 Mile Warm Up</strong>
                        <small>Easy conversation pace.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">1</div>
                    <div class="step-content">
                        <strong id="lbl-tempo">3 Mile Tempo (Continuous)</strong>
                        <small>Start moderate, get faster every mile/km. <br><strong>Recovery:</strong> 3 Minutes Jog (Transition).</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num">2</div>
                    <div class="step-content">
                        <strong>4 x 2:30 Minutes</strong>
                        <small>Fast & Hard effort (Faster than 5k pace).<br><strong>Recovery:</strong> 90s Jog between reps.</small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-num" style="background: var(--warmup);">C</div>
                    <div class="step-content">
                        <strong id="lbl-cd">1 Mile Cool Down</strong>
                        <small>Very slow jog to flush lactate.</small>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="pros-cons">
                    <div class="pc-box">
                        <h3>Pros</h3>
                        <ul>
                            <li>Simulates the "pain cave" at the end of a race.</li>
                            <li>Trains you to run fast on heavy legs.</li>
                            <li>Excellent half-marathon specific training.</li>
                        </ul>
                    </div>
                    <div class="pc-box">
                        <h3>Cons</h3>
                        <ul>
                            <li>High volume session (requires a good aerobic base).</li>
                            <li>Requires strict self-discipline on the tempo pacing.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="card tip-box">
                <strong>Coach's Tip:</strong>
                <p style="margin: 5px 0 0 0;">Do not race the first part of the tempo. If you go too hard early, the 2:30 reps will be impossible. The continuous run should feel "comfortably hard," but the 4 reps at the end should feel "very hard."</p>
            </div>
        </div>

        <div>
            <div class="card" style="background: #2D3436; color: white;">
                <h2 style="color:var(--accent); border-color:var(--accent);">Your Targets</h2>
                <p style="font-size: 0.9rem; opacity: 0.8;">Based on <span id="displayTime">--:--</span> 5K</p>
                
                <div class="pace-row">
                    <div><span id="tgt-wu">Warm Up Pace</span></div>
                    <span id="p-wu" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div id="tempo-splits-container" style="border-top: 1px solid #444; border-bottom: 1px solid #444; margin: 10px 0;">
                    </div>

                <div class="pace-row">
                    <div><span>2:30 Reps</span><span class="sub-label">Hard (Sub 5k Pace)</span></div>
                    <span id="p-reps" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row">
                    <div><span id="tgt-cd">Cool Down Pace</span></div>
                    <span id="p-cd" class="pace-val" style="color: white;">--:--</span>
                </div>

                <div class="pace-row" style="border-bottom: none;">
                    <div><span>Recovery Pace</span><span class="sub-label">Very Slow Jog</span></div>
                    <span id="p-rec" class="pace-val">--:--</span>
                </div>
            </div>

            <div class="card">
                <h3>Session Logic</h3>
                <p style="font-size: 0.9rem;">By pre-fatiguing the legs with a continuous aerobic effort, you force your body to recruit fast-twitch muscle fibers to hit the fast speeds in the final 2:30 minute reps.</p>
            </div>
        </div>

    </div>

</div>

<script src="app.js"></script>

<script>
    // PAGE SPECIFIC LOGIC
    window.onload = function() {
        initPage(); // From app.js
        updatePageCalc();
    }

    function updatePageCalc() {
        const input = document.getElementById('sessionPace').value;
        const totalSeconds = parseTime(input); // From app.js
        document.getElementById('displayTime').innerText = input || "--:--";

        if (!totalSeconds) return;

        let basePace, pReps, wuPace, cdPace, pRec, suffix;
        const container = document.getElementById('tempo-splits-container');
        let html = '';

        if (isMetric) {
            // KM MATH
            basePace = totalSeconds / 5; 
            suffix = " /km";
            
            // Progressive Pacing (Get faster by 4s per KM)
            // Start: +28s, End: +12s
            let km1 = basePace + 28;
            let km2 = basePace + 24;
            let km3 = basePace + 20;
            let km4 = basePace + 16;
            let km5 = basePace + 12;

            html += createRow("Tempo KM 1", km1, suffix);
            html += createRow("Tempo KM 2", km2, suffix);
            html += createRow("Tempo KM 3", km3, suffix);
            html += createRow("Tempo KM 4", km4, suffix);
            html += createRow("Tempo KM 5", km5, suffix);

            pReps = basePace - 6; // Faster than 5k
            pRec = basePace + 93;
            wuPace = basePace + 101;  
            cdPace = basePace + 101; 

            // Labels
            document.getElementById('dist-tag').innerText = "(~12 KM)";
            document.getElementById('lbl-wu').innerText = "1.6km Warm Up";
            document.getElementById('lbl-cd').innerText = "1.6km Cool Down";
            document.getElementById('lbl-tempo').innerText = "5km Tempo (Continuous)";
            document.getElementById('tgt-wu').innerText = "Warm Up Pace";
            document.getElementById('tgt-cd').innerText = "Cool Down Pace";

        } else {
            // MILE MATH
            basePace = totalSeconds / 3.1068; 
            suffix = " /mi";

            // Progressive Pacing (Get faster by ~12s per Mile)
            // Start: +45s, End: +20s
            let mi1 = basePace + 45;
            let mi2 = basePace + 32;
            let mi3 = basePace + 20;

            html += createRow("Tempo Mile 1", mi1, suffix);
            html += createRow("Tempo Mile 2", mi2, suffix);
            html += createRow("Tempo Mile 3", mi3, suffix);

            pReps = basePace - 10; // Faster than 5k
            pRec = basePace + 150;
            wuPace = basePace + 161; 
            cdPace = basePace + 161; 

            // Labels
            document.getElementById('dist-tag').innerText = "(~7.5 Miles)";
            document.getElementById('lbl-wu').innerText = "1 Mile Warm Up";
            document.getElementById('lbl-cd').innerText = "1 Mile Cool Down";
            document.getElementById('lbl-tempo').innerText = "3 Mile Tempo (Continuous)";
            document.getElementById('tgt-wu').innerText = "Warm Up Pace";
            document.getElementById('tgt-cd').innerText = "Cool Down Pace";
        }

        // Inject Dynamic Rows
        container.innerHTML = html;

        // Update Static Rows
        document.getElementById('p-wu').innerText = formatTime(wuPace) + suffix;
        document.getElementById('p-reps').innerText = formatTime(pReps) + suffix;
        document.getElementById('p-cd').innerText = formatTime(cdPace) + suffix;
        document.getElementById('p-rec').innerText = formatTime(pRec) + suffix;
    }

    // Helper to create HTML row string
    function createRow(label, time, suffix) {
        return `
        <div class="pace-row">
            <div><span>${label}</span></div>
            <span class="pace-val" style="color: white;">${formatTime(time)}${suffix}</span>
        </div>`;
    }
</script>

</body>
</html>